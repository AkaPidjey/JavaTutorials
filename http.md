[Java Tutorials](README.md)

# Http
+ [Что такое Http?](#Что-такое-Http)
+ [Структура HTTP-сообщения](#Структура-HTTP-сообщения)
+ [Стартовая строка](#Стартовая-строка)
+ [Методы HTTP запроса](#Методы-HTTP-запроса)
+ [HTTP ответы](#HTTP-ответы)
+ [Что такое сессия?](#Что-такое-сессия)
+ [Как сервер понимает, какие запросы пришли от одного клиента, а какие от другого или как он различает сессии?](#Как-сервер-понимает-какие-запросы-пришли-от-одного-клиента-а-какие-от-другого-или-как-он-различает-сессии)



+ [ССЫЛКИ НА ДОПОЛНИТЕЛЬНУЮ ИНФУ](#ССЫЛКИ-НА-ДОПОЛНИТЕЛЬНУЮ-ИНФУ)

+ [к оглавлению](#http)


# Http/Https

## Что такое Http?
__HTTP (англ. HyperText Transfer Protocol — «протокол передачи гипертекста»)__ — протокол прикладного уровня передачи данных (протокол верхнего (7-го) уровня сетевой модели OSI), изначально — в виде гипертекстовых документов в формате HTML, в настоящее время используется для передачи произвольных данных.

__HTTP__ — это протокол, позволяющий получать различные ресурсы, например HTML-документы. Протокол HTTP  лежит в основе обмена данными в Интернете. HTTP является протоколом клиент-серверного взаимодействия, что означает инициирование запросов к серверу самим получателем, обычно веб-браузером (web-browser). Полученный итоговый документ будет (может) состоять из различных поддокументов являющихся частью итогового документа: например, из отдельно полученного текста, описания структуры документа, изображений, видео-файлов, скриптов и многого другого.
+ [к оглавлению](#http)


## Структура HTTP-сообщения
Каждое HTTP-сообщение состоит из трёх частей, которые передаются в указанном порядке:
+ __1.Стартовая строка (англ. Starting line)__ — определяет тип сообщения;
+ __2.Заголовки (англ. Headers)__ — характеризуют тело сообщения, параметры передачи и прочие сведения;
+ __3.Тело сообщения (англ. Message Body)__ — непосредственно данные сообщения. Обязательно должно отделяться от заголовков пустой строкой.

Тело сообщения может отсутствовать, но стартовая строка и заголовок являются обязательными элементами. Исключением является версия 0.9 протокола, у которой сообщение запроса содержит только стартовую строку, а сообщения ответа — только тело сообщения.

Для версии протокола 1.1 сообщение запроса обязательно должно содержать заголовок Host.
Примеры:
__Типичный HTTP запрос:__
```
GET / HTTP/1.1
Host: javarush.ru
User-Agent: firefox/5.0 (Linux; Debian 5.0.8; en-US; rv:1.8.1.7)
```
В стартовой строке указаны:
GET — метод запроса;
/ — путь запроса (path);
HTTP/1.1 — версия протокола передачи данных.
Затем следуют заголовки:
Host — хост, которому адресован запрос;
User-Agent — клиент, который отправляет запрос.
Тело сообщения отсутствует.
+ [к оглавлению](#http)


## Стартовая строка
Стартовые строки различаются для запроса и ответа. 
__Строка запроса выглядит так:__

Метод URI HTTP/Версия — для версий, кроме 0.9

+ __Метод (англ. Method)__ — тип запроса, одно слово заглавными буквами. В версии HTTP 0.9 использовался только метод GET, список методов для версии 1.1 представлен ниже.
+ __URL__ определяет путь к запрашиваемому документу.
+ __Версия (англ. Version)__ — пара разделённых точкой цифр. Например: 1.0.
Пример:
Чтобы запросить страницу, клиент должен передать строку (задан всего один заголовок):

`GET /wiki/HTTP HTTP/1.0
Host: ru.wikipedia.org`

__Стартовая строка ответа сервера имеет следующий формат:__

HTTP/Версия КодСостояния Пояснение

+ __Версия__ — пара разделённых точкой цифр, как в запросе;
+ __Код состояния (англ. Status Code)__ — три цифры. По коду состояния определяется дальнейшее содержимое сообщения и поведение клиента;
+ __Пояснение (англ. Reason Phrase)__ — текстовое короткое пояснение к коду ответа для пользователя. Никак не влияет на сообщение и является необязательным.

Например, стартовая строка ответа сервера на предыдущий запрос может выглядеть так:
`HTTP/1.0 200 OK`
+ [к оглавлению](#http)


## Методы HTTP запроса
HTTP определяет множество методов запроса, которые указывают, какое желаемое действие выполнится для данного ресурса. Несмотря на то, что их названия могут быть существительными, эти методы запроса иногда называются HTTP глаголами. Каждый реализует свою семантику, но каждая группа команд разделяет общие свойства: так, методы могут быть безопасными, идемпотентными или кэшируемыми.

+ __GET__ - запрашивает представление ресурса. Запросы с использованием этого метода могут только извлекать данные.
+ __POST__ - используется для отправки сущностей к определённому ресурсу. Часто вызывает изменение состояния или какие-то побочные эффекты на сервере.
+ __HEAD__ - запрашивает ресурс так же, как и метод GET, но без тела ответа.
+ __PUT__ - заменяет все текущие представления ресурса данными запроса.
+ __DELETE__  - удаляет указанный ресурс.
+ __CONNECT__ - устанавливает "туннель" к серверу, определённому по ресурсу.
+ __OPTIONS__ - используется для описания параметров соединения с ресурсом.
+ __TRACE__ - выполняет вызов возвращаемого тестового сообщения с ресурса.
+ __PATCH__ - используется для частичного изменения ресурса.
+ [к оглавлению](#http)


## HTTP ответы
Код ответа (состояния) HTTP показывает, был ли успешно выполнен определённый HTTP запрос. Коды сгруппированы в 5 классов:
__Response Status Codes__
С телом сообщения и заголовками все ясно, а о кодах статусов стоит сказать пару слов. Response Status Codes всегда трехзначные, и первая цифра кода указывает категорию ответа:
+ __1xx__ — информационный. Запрос получен, сервер готов к продолжению;
+ __2xx__ — успешный. Запрос получен, понятен и обработан;
+ __3xx__ — перенаправление. Следующие действия нужно выполнить для обработки запроса;
+ __4xx__ — ошибка клиента. Запрос содержит ошибки или не отвечает протоколу;
+ __5xx__ — ошибка сервера. Сервер не смог обработать запрос, хотя был составлен верно;
Вторая и третья цифры в коде детализируют ответ. 

Например:
+ 200 OK — реквест получен и успешно обработан;
+ 201 Created — реквест получен и успешно обработан, в результате чего создан новый ресурс или его экземпляр;
+ 301 Moved Permanently — запрашиваемый ресурс был перемещен навсегда, и последующие запросы к нему должны происходить по новому адресу;
+ 307 Temporary Redirect — ресурс перемещен временно. Пока к нему можно обращаться, используя автоматическую переадресацию;
+ 403 Forbidden — запрос понятен, но нужна авторизация;
+ 404 Not Found — сервер не нашел ресурс по этому адресу;
+ 501 Not Implemented — сервер не поддерживает функциональность для ответа на этот запрос;
+ 505 HTTP Version Not Supported — сервер не поддерживает указанную версию HTTP-протокола.
Вдобавок к статус-коду ответа также отправляется описание статуса, благодаря которому интуитивно понятно, что значит конкретный статус. 
+ [к оглавлению](#http)


## Что такое сессия?
__Сессия__ — это диалоговое состояние между клиентом и сервером, включающее информацию о предыдущих запросах клиента и ответах сервера. В силу того, что протокол и сами веб-сервера не обеспечивают сохранение состояния, то единственной возможностью для этого является передача всей необходимой информации о запросе в нём самом. 

Чтобы это реализовать, каждый запрос от данного клиента сервер ассоциирует с некоторой уникальной информацией об установленной сессии (идентификатор сессии), пробрасывая её в каждом запросе и ответе. Для передачи данного UID наиболее популярными являются такие способы, как использование пользовательских `cookies`, скрытые поля формы и передача непосредственно в адресе запроса. 

Работа с пользовательскими сессиями веб-приложений в `JavaEE` вынесена в раздел `Servlet API` и осуществляется средствами интерфейса `javax.servlet.http.HttpSession`, который предоставляет высокоуровневые методы работы с ними. Непосредственная реализация уже располагается в библиотеке `servlet-api.jar` используемого контейнера сервлетов и напрямую зависит от него. 
+ [к оглавлению](#http)


## Как сервер понимает, какие запросы пришли от одного клиента, а какие от другого или как он различает сессии?
+ 1.Абсолютно для каждого нового запроса сервер (неважно, разные это клиенты или один) генерирует уникальный идентификатор сессии.
 Идентификатор сессии представляет собой случайно сгенерированное число, закодированное с помощью специального алгоритма в строку длиной 24 символа. Строка состоит из литералов от A до Z в нижнем регистре, а также чисел от 0 до 5. Пример идентификатора - hjnyuijl1pam3vox2h5i41in
+ 2.Если в течение текущего запроса данные клиента НЕ сохраняются для дальнейшей работы с ним, то и время жизни сессии этого клиента заканчивается (фактически не начавшись). При этом ранее сгенерированный идентификатор сессии становится недействительным (так как не был использован). В ответ на такой запрос клиент не получает ничего, чтобы связало его с новой сессией.
+ 3.Если же данные клиента (например, имя, адрес доставки товара) сохраняются на сервере, сервер связывает сохраненные данные с ранее сгенерированным идентификатором сессии. Далее создается специальная сессионная куки, и в нее записывается также этот идентификатор. Эта куки добавляется в ответ на запрос и сохраняется в браузере клиента. Таким образом, создается связь клиента и его персонализированной информации на сервере. Новая сессия для данного клиента создана.
+ 4.При каждом следующем запросе клиент передает на сервер персональный идентификатор сессии через куки. Сервер сопоставляет идентификаторы и «узнает» клиента в рамках текущей сессии.
+ 5.До тех пор, пока клиент передает свой персональный ключ, сессия считается активной. Сессия может закончиться по разным причинам, например, вручную на стороне сервера или по истечении какого-то установленного времени (таймаут).
+ [к оглавлению](#http)



## ССЫЛКИ НА ДОПОЛНИТЕЛЬНУЮ ИНФУ
### ---Info---
### ---Video---
### ---Lessons---
+ [Часть 3. Протоколы HTTP/HTTPS(2020)-->]( https://javarush.ru/groups/posts/2521-chastjh-3-protokolih-httphttps )
### ---Forum---




+ [Название-->]( Ссылка )
+ [Название-->]( Ссылка )
+ [Название-->]( Ссылка )
+ [Название-->]( Ссылка )
+ [Название-->]( Ссылка )
+ [Название-->]( Ссылка )
+ [Название-->]( Ссылка )
+ [Название-->]( Ссылка )
+ [Название-->]( Ссылка )
+ [Название-->]( Ссылка )
+ [Название-->]( Ссылка )

+ [к оглавлению](#http)
