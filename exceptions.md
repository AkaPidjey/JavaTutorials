[Java Tutorials](README.md)

# Исключения
+ [Что такое исключения?](#Что-такое-исключения)
+ [Какова иерархия исключений?](#Какова-иерархия-исключений)
+ [Какие виды исключений в Java вы знаете?](#Какие-виды-исключений-в-Java-вы-знаете)
+ [Что вы знаете об обрабатываемых и не обрабатываемых `checked/unchecked` исключениях?](#Что-вы-знаете-об-обрабатываемых-и-не-обрабатываемых-checked-unchecked-исключениях)
+ [Можно и нужно ли обрабатывать ошибки `jvm`?](#Можно-и-нужно-ли-обрабатывать-ошибки-jvm)
+ [Какие существуют способы обработки исключений?](#Какие-существуют-способы-обработки-исключений)
+ [О чем говорит ключевое слово `throws`?](#О-чем-говорит-ключевое-слово-throws)
+ [Какой оператор позволяет принудительно выбросить исключение?](#Какой-оператор-позволяет-принудительно-выбросить-исключение)
+ [В чем особенность блока `finally`? Всегда ли он исполняется?](#В-чем-особенность-блока-finally-Всегда-ли-он-исполняется)
+ [Существуют ли ситуации, когда блок `finally` не будет выполнен?](#Существуют-ли-ситуации-когда-блок-finally-не-будет-выполнен)
+ [Может ли не быть ни одного блока `catch` при отлавливании исключений?](#Может-ли-не-быть-ни-одного-блока-catch-при-отлавливании-исключений)
+ [Может ли один блок `catch` отлавливать сразу несколько исключений?](#Может-ли-один-блок-catch-отлавливать-сразу-несколько-исключений)
+ [Что произойдёт, если в блоке инициализации возникнет исключительная ситуация?](#Что-произойдёт-если-в-блоке-инициализации-возникнет-исключительная-ситуация)
+ [Какое исключение выбрасывается при возникновении ошибки в блоке инициализации класса?](#Какое-исключение-выбрасывается-при-возникновении-ошибки-в-блоке-инициализации-класса)
+ [Когда в приложении может быть выброшено исключение `ClassCastException`?](#Когда-в-приложении-может-быть-выброшено-исключение-ClassCastException)



## Что такое исключения?
Исключение – это проблема(ошибка) возникающая во время выполнения программы. Исключения могут возникать во многих случаях, например:
+ Пользователь ввел некорректные данные.
+ Файл, к которому обращается программа, не найден.
+ Сетевое соединение с сервером было утеряно во время передачи данных. И т.д.
Все исключения в Java являются объектами. Поэтому они могут порождаться не только автоматически при возникновении исключительной ситуации, но и создаваться самим разработчиком.

Каждый раз, когда при выполнении программы происходит ошибка, создается объект-исключение, содержащий информацию об ошибке, включая её тип и состояние программы на момент возникновения ошибки. После создания исключения среда выполнения пытается найти в стеке вызовов метод, который содержит код, обрабатывающий это исключение. Поиск начинается с метода, в котором произошла ошибка, и проходит через стек в обратном порядке вызова методов. Если не было найдено ни одного подходящего обработчика, выполнение программы завершается.

Исключения позволяют:
+ разделить обработку ошибок и сам алгоритм;
+ не загромождать код проверками возвращаемых значений;
+ обрабатывать ошибки на верхних уровнях, если на текущем уровне не хватает данных для обработки. Например, при написании универсального метода чтения из файла невозможно заранее предусмотреть реакцию на ошибку, так как эта реакция зависит от использующей метод программы;
+ классифицировать типы ошибок, обрабатывать похожие исключения одинаково, сопоставлять специфичным исключениям определенные обработчики.

Таким образом, механизм обработки исключений содержит следующие операции:
+ Создание объекта-исключения.
+ Заполнение stack trace'а этого исключения.
+ Stack unwinding (раскрутка стека) в поисках нужного обработчика.

[к оглавлению](#исключения)

## Какова иерархия исключений?

Исключения делятся на несколько классов, но все они имеют общего предка — класс Throwable. Его потомками являются подклассы Exception и Error.
+ Исключения (Exceptions) являются результатом проблем в программе, которые в принципе решаемые и предсказуемые. Например, произошло деление на ноль в целых числах.
+ Ошибки (Errors) представляют собой более серьёзные проблемы, которые, согласно спецификации Java, не следует пытаться обрабатывать в собственной программе, поскольку они связаны с проблемами уровня JVM. Например, исключения такого рода возникают, если закончилась память, доступная виртуальной машине. Программа дополнительную память всё равно не сможет обеспечить для JVM.

[к оглавлению](#исключения)

## Какие виды исключений в Java вы знаете?

В Java все исключения делятся на два типа:
+ __checked (контролируемые/проверяемые исключения)__ должны обрабатываться блоком `catch` или описываться в сигнатуре метода (например, `throws IOException`). Наличие такого обработчика/модификатора сигнатуры проверяются на этапе компиляции;
+ __unchecked (неконтролируемые/непроверяемые исключения)__, к которым относятся ошибки `Error` (например, `OutOfMemoryError`), обрабатывать которые не рекомендуется и исключения времени выполнения, представленные классом `RuntimeException` и его наследниками (например, `NullPointerException`), которые могут не обрабатываться блоком `catch` и не быть описанными в сигнатуре метода.

[к оглавлению](#исключения)

## Что вы знаете об обрабатываемых и не обрабатываемых `checked`, `unchecked` исключениях?

Все исключительные ситуации делятся на «проверяемые» `checked` и «непроверяемые» `unchecked`. Это свойство присуще «корневищу» `Throwable, Error, Exception, RuntimeException` и передается по наследству. Никак не видимо в исходном коде класса исключения.
В дальнейших примерах просто учтите, что— `Throwable` и `Exception` и все их наследники (за исключением наследников `Error-а` и `RuntimeException-а`) — `checked
— Error и RuntimeException` и все их наследники — `unchecked`
`checked exception` = проверяемое исключение, проверяемое компилятором.

Тема достаточно обширная для того, чтобы уместить ее в одном ответе. К примеру, можно разобрать примеры Головача: http://habrahabr.ru/company/golovachcourses/blog/225585/

И еще с quizful.net

+ 1. Checked исключения, это те, которые должны обрабатываться блоком catch или описываться в сигнатуре метода. Unchecked могут не обрабатываться и не быть описанными.
+ 2. Unchecked исключения в Java – наследованные от RuntimeException, checked – от Exception (не включая unchecked).

Checked исключения отличаются от Unchecked исключения в Java, тем что:
+ 1.Наличие\обработка __`Checked`__ исключения проверяются __на этапе компиляции__. 
+ 2.Наличие\обработка __`Unchecked`__ исключения происходит __на этапе выполнения__.

[к оглавлению](#исключения)

## Можно и нужно ли обрабатывать ошибки jvm?

Обрабатывать можно, но делать этого не стоит. Разработчику не предоставлены инструменты для обработки ошибок системы и виртуальной машины.

[к оглавлению](#исключения)

## Какие существуют способы обработки исключений?

В Java есть пять ключевых слов для работы с исключениями:
+ __1 `try` –__ данное ключевое слово используется для отметки начала блока кода, который потенциально может привести к ошибке.
+ __2 `catch` –__ ключевое слово для отметки начала блока кода, предназначенного для перехвата и обработки исключений.
+ __3 `finally` –__ ключевое слово для отметки начала блока кода, которой является дополнительным. Этот блок помещается после последнего блока ‘catch’. Управление обычно передаётся в блок 'finally' в любом случае.
+ __4 `throw` –__ служит для генерации исключений.
+ __5 `throws` –__ ключевое слово, которое прописывается в сигнатуре метода, и обозначающее что метод потенциально может выбросить исключение с указанным типом.
#### [Подробнее с примерами-->](http://www.quizful.net/post/java-exceptions)

[к оглавлению](#исключения)

## О чем говорит ключевое слово `throws`?

__`throws`__ – ключевое слово, которое прописывается в сигнатуре метода, и обозначающее что метод потенциально может выбросить исключение с указанным типом.

[к оглавлению](#исключения)

## Какой оператор позволяет принудительно выбросить исключение?

Это оператор `throw`:

```java
throw new Exception();
```
[к оглавлению](#исключения)

## В чем особенность блока `finally`? Всегда ли он исполняется?

Когда исключение передано, выполнение метода направляется по нелинейному пути. Это может стать источником проблем. Например, при входе метод открывает файл и закрывает при выходе. Чтобы закрытие файла не было пропущено из-за обработки исключения, был предложен механизм  __`finally`__.

Ключевое слово __`finally`__ создаёт блок кода, который будет выполнен после завершения блока __`try/catch`__, но перед кодом, следующим за ним. Блок будет выполнен, независимо от того, передано исключение или нет. Оператор __`finally`__ не обязателен, однако каждый оператор __`try`__ требует наличия либо __`catch`__, либо __`finally`__. Код в блоке __`finally`__ будет выполнен всегда.

[к оглавлению](#исключения)

## Существуют ли ситуации, когда блок `finally` не будет выполнен?

Например, когда JVM «умирает» - в такой ситуации `finally` недостижим и не будет выполнен, так как происходит принудительный системный выход из программы:

```java
try { 
    System.exit(0); 
} catch(Exception e) { 
    e.printStackTrace(); 
} finally { }
```

[к оглавлению](#исключения)

## Может ли не быть ни одного блока `catch` при отлавливании исключений?

Такая запись допустима, если имеется связка try{} finally {}. Но смысла в такой записи не так много, всё же лучше иметь блок catch в котором будет обрабатываться необходимое исключение.

```java
String x = "z";
try {
   x="234";
} finally {
    x = "Finally";
}
```

[к оглавлению](#исключения)

## Может ли один блок `catch` отлавливать сразу несколько исключений?

В Java 7 стала доступна новая языковая конструкция, с помощью которой можно перехватывать несколько исключений одним блоком `catch`:

```java
try {  
    //...
} catch(IOException | SQLException ex) {
    //...
}
```

[к оглавлению](#исключения)

## Что произойдёт, если в блоке инициализации возникнет исключительная ситуация?

Для нестатических блоков инициализации, если выбрасывание исключения прописано явным образом требуется, чтобы объявления этих исключений были перечислены в `throws` всех конструкторов класса. Иначе будет ошибка компиляции. Для статического блока выбрасывание исключения в явном виде, приводит к ошибке компиляции.

В остальных случаях, взаимодействие с исключениями будет проходить так же как и в любом другом месте. Класс не будет инициализирован, если ошибка происходит в статическом блоке и объект класса не будет создан, если ошибка возникает в нестатическом блоке.

[к оглавлению](#исключения)

## Какое исключение выбрасывается при возникновении ошибки в блоке инициализации класса?

Если возникшее исключение - наследник `RuntimeException`:
+ для статических блоков инициализации будет выброшено `java.lang.ExceptionInInitializerError`;
+ для нестатических будет проброшено исключение-источник.

Если возникшее исключение - наследник `Error`, то в обоих случаях будет выброшено `java.lang.Error`. Исключение: `java.lang.ThreadDeath` - смерть потока. В этом случае никакое исключение выброшено не будет.

[к оглавлению](#исключения)

## Когда в приложении может быть выброшено исключение `ClassCastException`?

`ClassCastException` (потомок `RuntimeException`) - исключение, которое будет выброшено при ошибке приведения типа.

[к оглавлению](#исключения)



































